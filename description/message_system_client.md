# 7. MessageSystem-клиент

MessageSystem-клиент выполняет роль посредника, передавая сообщения от frontend-клиент в database-клиент и обратно.

![](/description/img/message_system_client/common.svg)
* 7.1. MS (MessageSystem)
  
    MessageSystem - основной элемент клиента; включает в себя два основных части: 

    * Очередь (QUEUE)
    * MSCS

* 7.2. MSCS (MessageSystemClientService)

    Сервис клиентов системы сообщений содержит клиенты системы сообщений, интерфейс для обращения к ним, добавления и удаления.

* 7.3. MSC (MessageSystemClient)

    * Каждый инстанс данного класса, содержащийся в MSCS, соответствует database-клиенту или frontend-клиенту.
    * MSC добавляет в очерель (QUEUE) принятые от других клиентов.
    * Обрабатывает сообщения полученные из очереди и отправляет их в другие клиенты.

* 7.4. QUEUE

    Очередь сообщений

## Добавление MSC
При получении сообщения типа "I_AM_REQUEST" анализируется источник сообщения. Если MSC для данного клиента не существует, то новый MSC добавляется в MSCS. После этого, вне зависимости от изначального наличия MSC, в источник сообщения шлётся ответ типа "I_AM_RESPONSE".
